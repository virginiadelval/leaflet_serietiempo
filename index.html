<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Leaflet Timeline Slider</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
        integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
        crossorigin=""></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
        integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin=""></script>



    <script src="./leaflet-timeline-slider.js"></script>

</head>

<body>
    <div id="mapid" style="height: 600px;">
    </div>


    <script type="text/javascript">

        // creacion de grupo de variables 
        group_layers = new L.LayerGroup();

        var osmLayer = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap<\/a> contributors',
        });
        group_layers.addLayer(osmLayer)
        var GoogleSatelite = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            opacity: 0.8,
            attribution: '<a href="https://www.google.at/permissions/geoguidelines/attr-guide.html">Map data Â©2015 Google</a>' +
                'contributors',
            maxZoom: 18
        });
        group_layers.addLayer(GoogleSatelite)

        var layer1 = L.tileLayer.wms("http://geoportal.idesa.gob.ar/geoserver/wms?", {
            active: true,
            layers: 'geonode:depto_censo_pobnbi2010_1',
            format: 'image/png',
            transparent: true,
            opacity: 0.6,
            attribution: '<b>Los datos son tomados mediante servicio WMS de la <a href="http://geoportal.idesa.gob.ar/"> Infraestructura de Datos Espaciales de la Provincia de Salta </a>'

        });
        group_layers.addLayer(layer1)


        var layer2 = L.tileLayer.wms("http://geoportal.idesa.gob.ar/geoserver/wms?", {
            active: true,
            layers: 'geonode:pob_dpto_censo2010',
            format: 'image/png',
            transparent: true,
            opacity: 0.6,
            attribution: '<b>Los datos son tomados mediante servicio WMS de la <a href="http://geoportal.idesa.gob.ar/"> Infraestructura de Datos Espaciales de la Provincia de Salta </a>'
        });
        group_layers.addLayer(layer2)




        // data = {"type": "FeatureCollection",
        //             "features": [
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "Day 1",
        //                         "content": "This is where some people moved to."
        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [

        //                            -67.3975, -24.59185, 
        //                             1
        //                         ]
        //                     }
        //                 },
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "The Next Day",
        //                         "content": "This is where some people grooved to."
        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [
        //                          -67.78915,-24.77153,
        //                             1
        //                         ]
        //                     }
        //                 },
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "Amazing Event",
        //                         "content": "This is where they went to have fun."
        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [
        //                             -67.7791,-24.95352, 
        //                             1
        //                         ]
        //                     }
        //                 },
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "1776",
        //                         "content": "This where they went when the revolution had begun."
        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [
        //                          -67.74154,-25.11795,
        //                             1
        //                         ]
        //                     }
        //                 },
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "1776",
        //                         "content": "This where they went when the revolution had begun."

        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [
        //                          -67.65152,-25.07878,
        //                             1
        //                         ]
        //                     }
        //                 },
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "1984",
        //                         "content": "So they all came here...and disappeared without a trace!"
        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [
        //                         -67.63055, -25.11052, 
        //                             1
        //                         ]
        //                     }
        //                 },
        //                 {
        //                     "type": "Feature",
        //                     "properties": {
        //                         "title": "12/22/63",
        //                         "content": "Now, this can be quite the scary place."
        //                     },
        //                     "geometry": {
        //                         "type": "Point",
        //                         "coordinates": [
        //                          -67.51895, -25.24723,
        //                             1
        //                         ]
        //                     }
        //                 },
        //             ]
        //         }


        var mymap = L.map('mapid', {
            center: [-23.79303, -65.21527],
            zoom: 7,
            zoomControl: false
        })
        group_layers.addTo(mymap);
        // L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        // attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        // }).addTo(mymap);

        // getDataAddMarkers = function( {label, value, map, exclamation} ) {
        //     map.eachLayer(function (layer) {
        //             if (layer instanceof L.Marker) {
        //                 map.removeLayer(layer);
        //             }
        //     });

        //     filteredData = data.features.filter(function (i, n) {
        //         return i.properties.title===label;
        //         });

        //     var markerArray = [];
        //     L.geoJson(filteredData, {
        //         onEachFeature: function onEachFeature(feature, layer) {
        //             content = `${exclamation} <br> ${feature.properties.content} <br> (${Math.round(value/6 * 100)}% done with story)`
        //             var popup = L.popup().setContent(content);
        //             layer.bindPopup(popup);
        //             markerArray.push(layer);
        //         }
        //     }).addTo(map);

        //     var markerGroup = L.featureGroup(markerArray);
        //     map.fitBounds(markerGroup.getBounds()).setZoom(12);
        // };
        changeFloodMap = function ({
            label,
            value,
            map
        }) {
            group_layers.clearLayers();

            if (value == 1) {
                map.addLayer(osmLayer);
            } else if (value == 2) {
                map.addLayer(GoogleSatelite);
            } else if (value == 3) {
                map.addLayer(layer1);
            } else if (value == 4) {
                map.addLayer(layer2);
            } else if (value == 5) {
                map.addLayer(osmLayer);
            } else if (value == 6) {
                map.addLayer(GoogleSatelite);
            }
            //   else if(value == 7){
            //     map.addLayer(layer1); 
            //   }
            //   else if(value == 8){
            //     map.addLayer(layer2);
            //   }
            //   else if(value == 9){
            //     map.addLayer(osmLayer);
            //   }
            //   else if(value == 10){
            //     map.addLayer(GoogleSatelite);
            //   } 

        };
        L.control.timelineSlider({
            initializeChange: true,
            timelineItems: ["1", "2", "3", "4", "5", "6"],
            changeMap: changeFloodMap,
            
    
        }).addTo(mymap);

        L.control.zoom({
            position: 'topright'
        }).addTo(mymap);
        L.control.scale({
            position: 'bottomleft',
            imperial: false
        }).addTo(mymap);

        // L.control.timelineSlider({
        //     timelineItems: ["Day 1", "The Next Day", "Amazing Event", "1776", "12/22/63", "1984"], 
        //     })
        // .addTo(mymap);             
    </script>
</body>

</html>
